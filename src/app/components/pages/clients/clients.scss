/* --- Cards grid --- */
.cards { display: grid; grid-template-columns: repeat(var(--clients-grid-cols, 5), minmax(0, 1fr)); gap: 12px; grid-auto-rows: 1fr; }
.card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; padding: 14px; cursor: pointer; transition: transform .12s ease, box-shadow .12s ease; height: 100%; display: flex; flex-direction: column; }
.card:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(0,0,0,.15); }
.card__head { display: flex; align-items: baseline; justify-content: space-between; gap: 8px; margin-bottom: 6px; }
.card__title { font-weight: 700; }
.card__status { font-size: 12px; opacity: .7; }
.card__meta .row { display: flex; justify-content: space-between; font-size: 12px; opacity: .9; padding: 2px 0; }
.card .label { color: var(--color-text-secondary); margin-right: 8px; }
.placeholder { color: var(--color-text-secondary); padding: 12px; }

/* Empty state CTA */
.empty-state { display: grid; place-items: center; min-height: calc(70vh - 80px); }
.empty-card {
  display: flex; flex-direction: column; align-items: center; gap: 12px;
  padding: 28px 28px 22px; border: 1px dashed color-mix(in srgb, var(--border) 70%, transparent);
  border-radius: 16px; background: color-mix(in srgb, var(--panel) 92%, var(--active-bg));
  box-shadow: 0 16px 40px rgba(0,0,0,.18), 0 0 0 1px color-mix(in srgb, var(--fg) 6%, transparent) inset;
}
.empty-icon {
  width: 72px; height: 72px; border-radius: 50%; display: grid; place-items: center;
  background: color-mix(in srgb, var(--active-bg) 20%, var(--panel)); color: var(--fg);
  box-shadow: 0 10px 24px rgba(0,0,0,.2);
}
.empty-icon i { font-size: 28px; color: color-mix(in srgb, var(--active-bg) 80%, var(--fg)); }
.empty-title { font-weight: 800; letter-spacing: .2px; font-size: 1.15rem; }
.empty-sub { color: var(--color-text-secondary); margin-bottom: 4px; }
.btn.primary.big { padding: 10px 14px; border-radius: 12px; border: 1px solid color-mix(in srgb, var(--active-bg) 50%, var(--border)); background: color-mix(in srgb, var(--active-bg) 18%, transparent); color: var(--fg); display: inline-flex; align-items: center; gap: 8px; }
.btn.primary.big:hover { background: color-mix(in srgb, var(--active-bg) 26%, transparent); }

/* --- Dialog (partner detail) --- */
.map-embed { width: 100%; height: 360px; border: 0; border-radius: 10px; background: var(--panel-head); }

/* NOTE: p-dialog è montato nel body; usiamo ::ng-deep per applicare gli stili globalmente */
:host ::ng-deep .partner-dialog.p-dialog { width: 1120px !important; max-width: 95vw !important; border: 1px solid color-mix(in srgb, var(--fg) 6%, transparent) !important; border-radius: 14px !important; box-shadow:
    0 24px 64px -12px rgba(0,0,0,.55),
    0 8px 24px -8px rgba(0,0,0,.35),
    0 0 0 1px color-mix(in srgb, var(--fg) 5%, transparent) inset;
  overflow: hidden !important; clip-path: inset(0 round 14px); background-clip: padding-box; }
:host ::ng-deep .partner-dialog .p-dialog-header { background: var(--panel) !important; padding: 14px 16px !important; border-bottom: 1px solid var(--border) !important; }
:host ::ng-deep .partner-dialog .p-dialog-title { font-weight: 800 !important; letter-spacing: .2px; color: var(--fg) !important; }
:host ::ng-deep .partner-dialog .p-dialog-header .p-dialog-header-icon { width: 36px; height: 36px; border-radius: 10px; display: inline-flex; align-items: center; justify-content: center; color: var(--icon-color) !important; }
:host ::ng-deep .partner-dialog .p-dialog-header .p-dialog-header-icon:hover { background: var(--panel-head); color: var(--icon-active) !important; }
:host ::ng-deep .partner-dialog .p-dialog-content { background: var(--panel) !important; padding: 12px 16px !important; }
/* Rende possibile posizionare azioni flottanti all'interno del contenuto */
:host ::ng-deep .partner-dialog .p-dialog-content { position: relative; }

/* Azioni emoji in basso a destra */
:host ::ng-deep .partner-dialog .fab-actions {
  position: absolute;
  right: 12px;
  bottom: 10px;
  display: inline-flex;
  gap: 8px;
}
/* Button piccoli coerenti con tema */
:host ::ng-deep .partner-dialog .fab-actions .p-button {
  box-shadow: 0 6px 18px rgba(0,0,0,.18);
}
:host ::ng-deep .partner-dialog-mask { backdrop-filter: blur(8px) !important; background: color-mix(in srgb, var(--fg) 12%, transparent) !important; }

/* Tabs – navbar pill elegante, scrollabile se overflow */
.tabs { display: flex; gap: 8px; align-items: center; padding: 6px; margin: 8px 0; border: 1px solid var(--border); background: color-mix(in srgb, var(--panel) 90%, var(--active-bg)); border-radius: 12px; overflow: auto hidden; scrollbar-width: thin; }
.tabs__spacer { flex: 1 1 auto; }
.tab { appearance: none; background: transparent; border: 1px solid transparent; padding: 6px 12px; border-radius: 999px; color: var(--fg); cursor: pointer; outline: none; box-shadow: none; font-weight: 700; letter-spacing: .1px; display: inline-flex; align-items: center; gap: 8px; transition: background .12s ease, border-color .12s ease, color .12s ease, box-shadow .12s ease; }
.tab:hover { background: var(--panel-head); border-color: color-mix(in srgb, var(--border) 60%, transparent); }
.tab.active { background: color-mix(in srgb, var(--active-bg) 18%, var(--panel)); border-color: color-mix(in srgb, var(--active-bg) 40%, var(--border)); color: var(--fg); box-shadow: 0 1px 0 rgba(255,255,255,.04) inset, 0 8px 24px rgba(0,0,0,.18); }
.tab:focus-visible { outline: 2px solid color-mix(in srgb, var(--active-bg) 60%, transparent); outline-offset: 2px; }

/* Hide the 4th tab (Map) when data has neither address nor coordinates */
.tabs.hide-map-tab > .tab:nth-of-type(4) { display: none; }

/* Key-value rows & sections */
.detail__section { margin-top: 12px; position: relative; }
.detail__section::before { content: ''; display: block; height: 1px; background: linear-gradient(90deg, transparent, color-mix(in srgb, var(--active-bg) 35%, transparent), transparent); margin: 10px 0 12px; }
.kv { display: flex; justify-content: space-between; gap: 8px; padding: 6px 0; font-size: 14px; }
.kv span { color: var(--color-text-secondary); min-width: 140px; }
.kv b { font-weight: 700; letter-spacing: .1px; text-align: right; }

/* Inputs in edit mode inside detail modal */
:host ::ng-deep .partner-dialog,
:host ::ng-deep .partner-dialog .p-dialog-content,
:host ::ng-deep .partner-dialog .p-dialog-header {
  color: var(--fg) !important;
}

:host ::ng-deep .partner-dialog .kv input,
:host ::ng-deep .partner-dialog .kv textarea,
:host ::ng-deep .partner-dialog .kv select {
  width: min(420px, 100%);
  padding: 8px 10px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--panel-head);
  color: var(--fg);
}
:host ::ng-deep .partner-dialog .kv textarea { resize: vertical; min-height: 36px; }
:host ::ng-deep .partner-dialog .kv input:focus,
:host ::ng-deep .partner-dialog .kv textarea:focus,
:host ::ng-deep .partner-dialog .kv select:focus {
  outline: none;
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--active-bg) 30%, transparent);
  border-color: color-mix(in srgb, var(--active-bg) 50%, var(--border));
}

/* Ensure select dropdown options are visible in both themes */
:host ::ng-deep .partner-dialog .kv select option { color: var(--fg); background: var(--panel); }

/* Ensure view mode text has explicit color */
.kv span, .kv b { color: var(--fg); }

/* Add button with text consistent with app style */
.text-btn { display: inline-flex; align-items: center; gap: 8px; padding: 6px 12px; border-radius: 10px; border: 1px solid var(--border); background: transparent; color: var(--fg); cursor: pointer; transition: background .12s ease, color .12s ease, border-color .12s ease; }
.text-btn i { color: var(--icon-color); }
.text-btn:hover { background: var(--panel-head); border-color: color-mix(in srgb, var(--icon-active) 40%, var(--border)); }
.text-btn:hover i { color: var(--icon-active); }
/* Variant for primary action but subtle (avoid strong theme blue) */
.action-add { background: color-mix(in srgb, var(--active-bg) 12%, transparent); border-color: color-mix(in srgb, var(--active-bg) 45%, var(--border)); }
.action-add:hover { background: color-mix(in srgb, var(--active-bg) 20%, transparent); }

/* Create dialog form styling consistent with app */
:host ::ng-deep .partner-dialog .create-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
:host ::ng-deep .partner-dialog .create-grid .span-2 { grid-column: 1 / 3; }
:host ::ng-deep .partner-dialog .create-grid label { display: flex; flex-direction: column; gap: 6px; }
:host ::ng-deep .partner-dialog .create-grid label > span { color: var(--color-text-secondary); font-size: .9rem; }
:host ::ng-deep .partner-dialog .create-grid input,
:host ::ng-deep .partner-dialog .create-grid textarea {
  padding: 8px 10px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: transparent;
  color: var(--fg);
}
:host ::ng-deep .partner-dialog .create-grid input:focus,
:host ::ng-deep .partner-dialog .create-grid textarea:focus {
  outline: none;
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--active-bg) 30%, transparent);
  border-color: color-mix(in srgb, var(--active-bg) 50%, var(--border));
}
:host ::ng-deep .partner-dialog .dialog-actions {
  margin-top: 12px;
  display: flex; justify-content: flex-end; gap: 8px;
}
:host ::ng-deep .partner-dialog .btn { border: 1px solid var(--border); background: transparent; color: var(--fg); padding: 6px 12px; border-radius: 10px; cursor: pointer; }
:host ::ng-deep .partner-dialog .btn:hover { background: var(--panel-head); }
:host ::ng-deep .partner-dialog .btn.primary { background: color-mix(in srgb, var(--active-bg) 18%, transparent); border-color: color-mix(in srgb, var(--active-bg) 50%, var(--border)); }
:host ::ng-deep .partner-dialog .btn.primary:hover { background: color-mix(in srgb, var(--active-bg) 26%, transparent); }
